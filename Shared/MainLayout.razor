@inherits LayoutComponentBase

<MudThemeProvider Theme="_currentTheme" />

<MudDialogProvider />

<MudSnackbarProvider />

<MudLayout>

    <MudAppBar Elevation="4">
        <MudStack Direction="Row" AlignItems="AlignItems.Center" Spacing="2">
            <MudIcon Icon="@Icons.Material.Filled.Chat" />
            <MudText Typo="Typo.h6">ChatConnect Ultra</MudText>
        </MudStack>

        <MudSpacer />

        <MudIconButton Icon="@(_darkMode? Icons.Material.Filled.LightMode : Icons.Material.Filled.DarkMode)"
                       Color="Color.Inherit"
                       OnClick="ToggleTheme" />
    </MudAppBar>

    <MudMainContent>
        @Body
    </MudMainContent>

</MudLayout>

@code {
    private bool _darkMode = false;

    private MudTheme _lightTheme = new()
    {
        PaletteLight = new PaletteLight()
        {
            Primary = Colors.Green.Darken2,
            Background = "#f5f7fb",
            Surface = Colors.Shades.White
        }
    };

    private MudTheme _darkTheme = new()
    {
        PaletteDark = new PaletteDark()
        {
            Primary = Colors.Green.Accent3,
            Background = "#121212",
            Surface = "#1e1e1e"
        }
    };

    private MudTheme _currentTheme;

    protected override void OnInitialized()
    {
        _currentTheme = _lightTheme;
    }

    private void ToggleTheme()
    {
        _darkMode = !_darkMode;
        _currentTheme = _darkMode ? _darkTheme : _lightTheme;
    }
}
